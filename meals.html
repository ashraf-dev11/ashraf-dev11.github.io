<script>
document.addEventListener("DOMContentLoaded", function () {

const data = {
  cut: {
    breakfast: [
      "Ø¨ÙŠØ¶ Ù…Ø³Ù„ÙˆÙ‚ + Ø®Ø¶Ø§Ø±",
      "Ø´ÙˆÙØ§Ù† Ø¨Ø§Ù„Ù…ÙŠØ§Ù‡",
      "Ø²Ø¨Ø§Ø¯ÙŠ ÙŠÙˆÙ†Ø§Ù†ÙŠ + ÙØ±Ø§ÙˆÙ„Ø©"
    ],
    lunch: [
      "ØµØ¯Ø± Ø¯Ø¬Ø§Ø¬ + Ø³Ù„Ø·Ø©",
      "Ø³Ù…Ùƒ Ù…Ø´ÙˆÙŠ + Ø®Ø¶Ø§Ø±",
      "ØªÙˆÙ†Ø© + Ø£Ø±Ø² Ø¨Ù†ÙŠ"
    ],
    dinner: [
      "Ø²Ø¨Ø§Ø¯ÙŠ + Ù…ÙƒØ³Ø±Ø§Øª",
      "Ø¨ÙŠØ¶ + Ø®ÙŠØ§Ø±",
      "Ø¬Ø¨Ù†Ø© Ù‚Ø±ÙŠØ´"
    ],
    snacks: {
      base: ["ØªÙØ§Ø­", "Ø¨Ø±ØªÙ‚Ø§Ù„", "Ù…ÙˆØ²", "ÙƒÙŠÙˆÙŠ"],
      extra: ["Ø­ÙÙ†Ø© Ù…ÙƒØ³Ø±Ø§Øª", "Ø²Ø¨Ø§Ø¯ÙŠ Ù„Ø§ÙŠØª", "Ù‚Ù‡ÙˆØ© Ø³Ø§Ø¯Ø©", "Ø´Ø§ÙŠ Ø£Ø®Ø¶Ø±"]
    }
  },

  bulk: {
    breakfast: [
      "Ø¨ÙŠØ¶ + Ø®Ø¨Ø²",
      "Ø´ÙˆÙØ§Ù† + Ù…ÙˆØ²",
      "ØªÙˆØ³Øª + Ø²Ø¨Ø¯Ø© ÙÙˆÙ„"
    ],
    lunch: [
      "Ø£Ø±Ø² + Ø¯Ø¬Ø§Ø¬",
      "Ù…ÙƒØ±ÙˆÙ†Ø© + Ù„Ø­Ù…",
      "ÙƒÙØªØ© + Ø£Ø±Ø²"
    ],
    dinner: [
      "Ø¨ÙŠØ¶ + Ø®Ø¨Ø²",
      "Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´ ØªÙˆÙ†Ø©",
      "Ø²Ø¨Ø§Ø¯ÙŠ + ÙØ§ÙƒÙ‡Ø©"
    ],
    snacks: {
      base: ["Ù…ÙˆØ²", "ØªÙ…Ø±", "ØªÙØ§Ø­"],
      extra: ["Ø²Ø¨Ø¯Ø© ÙÙˆÙ„", "Ù„Ø¨Ù† ÙƒØ§Ù…Ù„", "Ø¨Ø±ÙˆØªÙŠÙ† Ø´ÙŠÙƒ"]
    }
  }
};

function pick(arr, used) {
  const a = arr.filter(x => !used.has(x));
  const v = a[Math.floor(Math.random() * a.length)];
  used.add(v);
  return v;
}

function snack(s, used) {
  return pick(s.base, used) + " + " + pick(s.extra, used);
}

window.generateMeals = function () {
  const goal = localStorage.getItem("goal") || "cut";
  const g = data[goal];
  const used = new Set();

  document.querySelector("#mealsTable tbody").innerHTML = `
    <tr><td>ğŸ³ Ø§Ù„Ø¥ÙØ·Ø§Ø±</td><td>${pick(g.breakfast, used)}</td></tr>
    <tr><td>ğŸ Ø³Ù†Ø§Ùƒ</td><td>${snack(g.snacks, used)}</td></tr>
    <tr><td>ğŸ› Ø§Ù„ØºØ¯Ø§Ø¡</td><td>${pick(g.lunch, used)}</td></tr>
    <tr><td>ğŸŒ Ø³Ù†Ø§Ùƒ</td><td>${snack(g.snacks, used)}</td></tr>
    <tr><td>ğŸŒ™ Ø§Ù„Ø¹Ø´Ø§Ø¡</td><td>${pick(g.dinner, used)}</td></tr>
  `;
};

generateMeals();

});
</script>

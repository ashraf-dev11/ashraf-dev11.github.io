<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ø´Ù‡Ø±ÙŠØ© Ø§Ù„Ø°ÙƒÙŠØ©</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
background: linear-gradient(to right,#eef2f3,#ffffff);
font-family: Tahoma;
}

.container{
max-width:1200px;
background:white;
padding:30px;
border-radius:20px;
margin-top:30px;
box-shadow:0 10px 25px rgba(0,0,0,0.1);
}

.plan-card{
cursor:pointer;
transition:0.3s;
}
.plan-card:hover{
transform:scale(1.05);
}

img.food{
width:60px;
border-radius:10px;
}
</style>
</head>

<body>

<div class="container">

<h2 class="text-center mb-3">ğŸ“… Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ø´Ù‡Ø±ÙŠØ© Ø§Ù„Ø°ÙƒÙŠØ©</h2>

<div class="mb-3">
<label>Ø§Ø¯Ø®Ù„ ÙˆØ²Ù†Ùƒ (ÙƒØ¬Ù…)</label>
<input type="number" id="weight" class="form-control">
</div>

<h4 class="text-center">Ø§Ø®ØªØ± Ù‡Ø¯ÙÙƒ</h4>
<div class="row" id="plansContainer"></div>

<hr>

<h4 class="text-center">ğŸ”¥ Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©: <span id="caloriesBox">0</span></h4>

<table class="table table-bordered mt-3">
<thead>
<tr>
<th>Ø§Ù„ÙŠÙˆÙ…</th>
<th>Ø§Ù„Ø¥ÙØ·Ø§Ø±</th>
<th>Ø³Ù†Ø§Ùƒ</th>
<th>Ø§Ù„ØºØ¯Ø§Ø¡</th>
<th>Ø§Ù„Ø¹Ø´Ø§Ø¡</th>
</tr>
</thead>
<tbody id="planTable"></tbody>
</table>

</div>

<script>

/* ========= Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø·Ø· ========= */

const plans = {
cut:{title:"ğŸ”¥ ØªÙ†Ø´ÙŠÙ", cal:30},
bulk:{title:"ğŸ’ª ØªØ¶Ø®ÙŠÙ…", cal:40},
vegCut:{title:"ğŸ¥¦ ØªÙ†Ø´ÙŠÙ Ù†Ø¨Ø§ØªÙŠ", cal:28},
vegBulk:{title:"ğŸŒ± ØªØ¶Ø®ÙŠÙ… Ù†Ø¨Ø§ØªÙŠ", cal:38},
ramadanBulk:{title:"ğŸŒ™ ØªØ¶Ø®ÙŠÙ… Ø±Ù…Ø¶Ø§Ù†", cal:39},
ramadanCut:{title:"ğŸŒ™ğŸ”¥ ØªÙ†Ø´ÙŠÙ Ø±Ù…Ø¶Ø§Ù†", cal:29}
};


/* ========= Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙƒÙ„ + Ø§Ù„ØµÙˆØ± ========= */

const meals = {

breakfast:[
{name:"Ø¨ÙŠØ¶ + Ø¹ÙŠØ´", img:"https://i.imgur.com/HYxJ0sF.jpg"},
{name:"ÙÙˆÙ„ + Ø¹ÙŠØ´", img:"https://i.imgur.com/4YVYw5L.jpg"},
{name:"Ø¬Ø¨Ù†Ø© Ù‚Ø±ÙŠØ´", img:"https://i.imgur.com/eh7YQ7T.jpg"},
{name:"Ø¹Ø¯Ø³", img:"https://i.imgur.com/pYtGJQH.jpg"}
],

snack:[
{name:"ØªÙØ§Ø­", img:"https://i.imgur.com/Nz5sK3V.jpg"},
{name:"Ù…ÙˆØ²", img:"https://i.imgur.com/4V0v6hN.jpg"},
{name:"ØªÙ…Ø±", img:"https://i.imgur.com/jmX5v5R.jpg"},
{name:"Ù…ÙƒØ³Ø±Ø§Øª", img:"https://i.imgur.com/5KqJxvZ.jpg"}
],

lunch:[
{name:"Ø±Ø² + ÙØ±Ø§Ø®", img:"https://i.imgur.com/9g0t3QK.jpg"},
{name:"Ù…ÙƒØ±ÙˆÙ†Ø© + Ù„Ø­Ù…Ø©", img:"https://i.imgur.com/Qg5G5Xy.jpg"},
{name:"Ø±Ø² + ÙƒÙØªØ©", img:"https://i.imgur.com/f5iG7nl.jpg"},
{name:"ØªÙˆÙ†Ø© + Ø³Ù„Ø·Ø©", img:"https://i.imgur.com/w0K9r0S.jpg"}
],

dinner:[
{name:"Ø¨ÙŠØ¶ Ù…Ø³Ù„ÙˆÙ‚", img:"https://i.imgur.com/9E6yRkG.jpg"},
{name:"Ø²Ø¨Ø§Ø¯ÙŠ", img:"https://i.imgur.com/1mT7n8F.jpg"},
{name:"ÙÙˆÙ„", img:"https://i.imgur.com/YrO2Vfa.jpg"},
{name:"Ø³Ù„Ø·Ø©", img:"https://i.imgur.com/3f3VYvT.jpg"}
]

};


/* ========= Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø·Ø· ========= */

const container = document.getElementById("plansContainer");

Object.keys(plans).forEach(key=>{
container.innerHTML+=`
<div class="col-md-4 mb-3">
<div class="card plan-card p-3" onclick="generateMonth('${key}')">
<h5>${plans[key].title}</h5>
</div>
</div>
`;
});


/* ========= Ø§Ø®ØªÙŠØ§Ø± ÙˆØ¬Ø¨Ø© Ø¨Ø¯ÙˆÙ† ØªÙƒØ±Ø§Ø± ========= */

function pickUnique(arr, used){
let item;
do{
item = arr[Math.floor(Math.random()*arr.length)];
}while(used.has(item.name));
used.add(item.name);
return item;
}


/* ========= Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø±Ø§Øª ========= */

function calculateCalories(type){

let weight = document.getElementById("weight").value;
if(!weight) return 0;

let calories = weight * plans[type].cal;

document.getElementById("caloriesBox").innerText = calories;
return calories;
}


/* ========= ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¬Ø¯ÙˆÙ„ ========= */

function generateMonth(type){

calculateCalories(type);

const table = document.getElementById("planTable");
table.innerHTML="";

const used = new Set();
let storedPlan = [];

for(let i=1;i<=30;i++){

let b = pickUnique(meals.breakfast, used);
let s = pickUnique(meals.snack, used);
let l = pickUnique(meals.lunch, used);
let d = pickUnique(meals.dinner, used);

storedPlan.push({day:i,b,s,l,d});

table.innerHTML+=`
<tr>
<td>${i}</td>

<td>
<img class="food" src="${b.img}">
<br>${b.name}
</td>

<td>
<img class="food" src="${s.img}">
<br>${s.name}
</td>

<td>
<img class="food" src="${l.img}">
<br>${l.name}
</td>

<td>
<img class="food" src="${d.img}">
<br>${d.name}
</td>

</tr>
`;
}

/* Ø­ÙØ¸ Ø§Ù„Ø®Ø·Ø© */
localStorage.setItem("savedPlan", JSON.stringify(storedPlan));
localStorage.setItem("savedType", type);

}


/* ========= Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø®Ø·Ø© ========= */

window.onload = ()=>{

let saved = localStorage.getItem("savedPlan");
let type = localStorage.getItem("savedType");

if(saved && type){

calculateCalories(type);

const table = document.getElementById("planTable");
let plan = JSON.parse(saved);

plan.forEach(row=>{

table.innerHTML+=`
<tr>
<td>${row.day}</td>
<td>${row.b.name}</td>
<td>${row.s.name}</td>
<td>${row.l.name}</td>
<td>${row.d.name}</td>
</tr>
`;
});

}

};

</script>

</body>
</html>
